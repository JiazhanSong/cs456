Mr. Jones, of the Manor Farm, had locked the hen-houses for the night, but 
was too drunk to remember to shut the pop-holes. With the ring of light 
from his lantern dancing from side to side, he lurched across the yard, 
kicked off his boots at the back door, drew himself a last glass of beer 
from the barrel in the scullery, and made his way up to bed, where 
Mrs. Jones was already snoring. 

As soon as the light in the bedroom went out there was a stirring and a 
fluttering all through the farm buildings. Word had gone round during the 
day that old Major, the prize Middle White boar, had had a strange dream 
on the previous night and wished to communicate it to the other animals. 
It had been agreed that they should all meet in the big barn as soon as 
Mr. Jones was safely out of the way. Old Major (so he was always called, 
though the name under which he had been exhibited was Willingdon Beauty) 
was so highly regarded on the farm that everyone was quite ready to lose 
an hour's sleep in order to hear what he had to say. 

At one end of the big barn, on a sort of raised platform, Major was 
already ensconced on his bed of straw, under a lantern which hung from a 
beam. He was twelve years old and had lately grown rather stout, but he 
was still a majestic-looking pig, with a wise and benevolent appearance in 
spite of the fact that his tushes had never been cut. Before long the 
other animals began to arrive and make themselves comfortable after their 
different fashions. First came the three dogs, Bluebell, Jessie, and 
Pincher, and then the pigs, who settled down in the straw immediately in 
front of the platform. The hens perched themselves on the window-sills, 
the pigeons fluttered up to the rafters, the sheep and cows lay down 
behind the pigs and began to chew the cud. The two cart-horses, Boxer and 
Clover, came in together, walking very slowly and setting down their vast 
hairy hoofs with great care lest there should be some small animal 
concealed in the straw. Clover was a stout motherly mare approaching 
middle life, who had never quite got her figure back after her fourth foal. 
Boxer was an enormous beast, nearly eighteen hands high, and as strong as 
any two ordinary horses put together. A white stripe down his nose gave 
him a somewhat stupid appearance, and in fact he was not of first-rate 
intelligence, but he was universally respected for his steadiness of 
character and tremendous powers of work. After the horses came Muriel, 
the white goat, and Benjamin, the donkey. Benjamin was the oldest animal 
on the farm, and the worst tempered. He seldom talked, and when he did, it 
was usually to make some cynical remark--for instance, he would say that 
God had given him a tail to keep the flies off, but that he would sooner 
have had no tail and no flies. Alone among the animals on the farm he 
never laughed. If asked why, he would say that he saw nothing to laugh at. 
Nevertheless, without openly admitting it, he was devoted to Boxer; the 
two of them usually spent their Sundays together in the small paddock 
beyond the orchard, grazing side by side and never speaking. 

The two horses had just lain down when a brood of ducklings, which had 
lost their mother, filed into the barn, cheeping feebly and wandering from 
side to side to find some place where they would not be trodden on. Clover 
made a sort of wall round them with her great foreleg, and the ducklings 
nestled down inside it and promptly fell asleep. At the last moment 
Mollie, the foolish, pretty white mare who drew Mr. Jones's trap, came 
mincing daintily in, chewing at a lump of sugar. She took a place near the 
front and began flirting her white mane, hoping to draw attention to the 
red ribbons it was plaited with. Last of all came the cat, who looked 
round, as usual, for the warmest place, and finally squeezed herself in 
between Boxer and Clover; there she purred contentedly throughout Major's 
speech without listening to a word of what he was saying. 

All the animals were now present except Moses, the tame raven, who slept 
on a perch behind the back door. When Major saw that they had all made 
themselves comfortable and were waiting attentively, he cleared his throat 
and began: 

"Comrades, you have heard already about the strange dream that I had last 
night. But I will come to the dream later. I have something else to say 
first. I do not think, comrades, that I shall be with you for many months 
longer, and before I die, I feel it my duty to pass on to you such wisdom 
as I have acquired. I have had a long life, I have had much time for 
thought as I lay alone in my stall, and I think I may say that I 
understand the nature of life on this earth as well as any animal now 
living. It is about this that I wish to speak to you. 

"Now, comrades, what is the nature of this life of ours? Let us face it: 
our lives are miserable, laborious, and short. We are born, we are given 
just so much food as will keep the breath in our bodies, and those of us 
who are capable of it are forced to work to the last atom of our strength; 
and the very instant that our usefulness has come to an end we are 
slaughtered with hideous cruelty. No animal in England knows the meaning 
of happiness or leisure after he is a year old. No animal in England is 
free. The life of an animal is misery and slavery: that is the plain truth. 

"But is this simply part of the order of nature? Is it because this land 
of ours is so poor that it cannot afford a decent life to those who dwell 
upon it? No, comrades, a thousand times no! The soil of England is 
fertile, its climate is good, it is capable of affording food in abundance 
to an enormously greater number of animals than now inhabit it. This 
single farm of ours would support a dozen horses, twenty cows, hundreds of 
sheep--and all of them living in a comfort and a dignity that are now 
almost beyond our imagining. Why then do we continue in this miserable 
condition? Because nearly the whole of the produce of our labour is stolen 
from us by human beings. There, comrades, is the answer to all our 
problems. It is summed up in a single word--Man. Man is the only real 
enemy we have. Remove Man from the scene, and the root cause of hunger and 
overwork is abolished for ever. 

"Man is the only creature that consumes without producing. He does not 
give milk, he does not lay eggs, he is too weak to pull the plough, he 
cannot run fast enough to catch rabbits. Yet he is lord of all the 
animals. He sets them to work, he gives back to them the bare minimum that 
will prevent them from starving, and the rest he keeps for himself. Our 
labour tills the soil, our dung fertilises it, and yet there is not one of 
us that owns more than his bare skin. You cows that I see before me, how 
many thousands of gallons of milk have you given during this last year? 
And what has happened to that milk which should have been breeding up 
sturdy calves? Every drop of it has gone down the throats of our enemies. 
And you hens, how many eggs have you laid in this last year, and how many 
of those eggs ever hatched into chickens? The rest have all gone to market 
to bring in money for Jones and his men. And you, Clover, where are those 
four foals you bore, who should have been the support and pleasure of your 
old age? Each was sold at a year old--you will never see one of them 
again. In return for your four confinements and all your labour in the 
fields, what have you ever had except your bare rations and a stall? 

"And even the miserable lives we lead are not allowed to reach their 
natural span. For myself I do not grumble, for I am one of the lucky ones. 
I am twelve years old and have had over four hundred children. Such is the 
natural life of a pig. But no animal escapes the cruel knife in the end. 
You young porkers who are sitting in front of me, every one of you will 
scream your lives out at the block within a year. To that horror we all 
must come--cows, pigs, hens, sheep, everyone. Even the horses and the dogs 
have no better fate. You, Boxer, the very day that those great muscles of 
yours lose their power, Jones will sell you to the knacker, who will cut 
your throat and boil you down for the foxhounds. As for the dogs, when 
they grow old and toothless, Jones ties a brick round their necks and 
drowns them in the nearest pond. 

"Is it not crystal clear, then, comrades, that all the evils of this life 
of ours spring from the tyranny of human beings? Only get rid of Man, and 
the produce of our labour would be our own. Almost overnight we could 
become rich and free. What then must we do? Why, work night and day, body 
and soul, for the overthrow of the human race! That is my message to you, 
comrades: Rebellion! I do not know when that Rebellion will come, it might 
be in a week or in a hundred years, but I know, as surely as I see this 
straw beneath my feet, that sooner or later justice will be done. Fix your 
eyes on that, comrades, throughout the short remainder of your lives! And 
above all, pass on this message of mine to those who come after you, so 
that future generations shall carry on the struggle until it is victorious. 

"And remember, comrades, your resolution must never falter. No argument 
must lead you astray. Never listen when they tell you that Man and the 
animals have a common interest, that the prosperity of the one is the 
prosperity of the others. It is all lies. Man serves the interests of no 
creature except himself. And among us animals let there be perfect unity, 
perfect comradeship in the struggle. All men are enemies. All animals are 
comrades." 

At this moment there was a tremendous uproar. While Major was speaking 
four large rats had crept out of their holes and were sitting on their 
hindquarters, listening to him. The dogs had suddenly caught sight of 
them, and it was only by a swift dash for their holes that the rats saved 
their lives. Major raised his trotter for silence. 

"Comrades," he said, "here is a point that must be settled. The wild 
creatures, such as rats and rabbits--are they our friends or our enemies? 
Let us put it to the vote. I propose this question to the meeting: Are 
rats comrades?" 

The vote was taken at once, and it was agreed by an overwhelming majority 
that rats were comrades. There were only four dissentients, the three dogs 
and the cat, who was afterwards discovered to have voted on both sides. 
Major continued: 

"I have little more to say. I merely repeat, remember always your duty of 
enmity towards Man and all his ways. Whatever goes upon two legs is an 
enemy. Whatever goes upon four legs, or has wings, is a friend. And 
remember also that in fighting against Man, we must not come to resemble 
him. Even when you have conquered him, do not adopt his vices. No animal 
must ever live in a house, or sleep in a bed, or wear clothes, or drink 
alcohol, or smoke tobacco, or touch money, or engage in trade. All the 
habits of Man are evil. And, above all, no animal must ever tyrannise over 
his own kind. Weak or strong, clever or simple, we are all brothers. No 
animal must ever kill any other animal. All animals are equal. 

"And now, comrades, I will tell you about my dream of last night. I cannot 
describe that dream to you. It was a dream of the earth as it will be when 
Man has vanished. But it reminded me of something that I had long 
forgotten. Many years ago, when I was a little pig, my mother and the 
other sows used to sing an old song of which they knew only the tune and 
the first three words. I had known that tune in my infancy, but it had 
long since passed out of my mind. Last night, however, it came back to me 
in my dream. And what is more, the words of the song also came back-words, 
I am certain, which were sung by the animals of long ago and have been 
lost to memory for generations. I will sing you that song now, comrades. 
I am old and my voice is hoarse, but when I have taught you the tune, you 
can sing it better for yourselves. It is called 'Beasts of England'." 

Old Major cleared his throat and began to sing. As he had said, his voice 
was hoarse, but he sang well enough, and it was a stirring tune, something 
between 'Clementine' and 'La Cucaracha'. The words ran: 

Beasts of England, beasts of Ireland, 
Beasts of every land and clime, 
Hearken to my joyful tidings 
Of the golden future time. 

Soon or late the day is coming, 
Tyrant Man shall be o'erthrown, 
And the fruitful fields of England 
Shall be trod by beasts alone. 

Rings shall vanish from our noses, 
And the harness from our back, 
Bit and spur shall rust forever, 
Cruel whips no more shall crack. 

Riches more than mind can picture, 
Wheat and barley, oats and hay, 
Clover, beans, and mangel-wurzels 
Shall be ours upon that day. 

Bright will shine the fields of England, 
Purer shall its waters be, 
Sweeter yet shall blow its breezes 
On the day that sets us free. 

For that day we all must labour, 
Though we die before it break; 
Cows and horses, geese and turkeys, 
All must toil for freedom's sake. 

Beasts of England, beasts of Ireland, 
Beasts of every land and clime, 
Hearken well and spread my tidings 
Of the golden future time. 


The singing of this song threw the animals into the wildest excitement. 
Almost before Major had reached the end, they had begun singing it for 
themselves. Even the stupidest of them had already picked up the tune and 
a few of the words, and as for the clever ones, such as the pigs and dogs, 
they had the entire song by heart within a few minutes. And then, after a 
few preliminary tries, the whole farm burst out into 'Beasts of England' in 
tremendous unison. The cows lowed it, the dogs whined it, the sheep 
bleated it, the horses whinnied it, the ducks quacked it. They were so 
delighted with the song that they sang it right through five times in 
succession, and might have continued singing it all night if they had not 
been interrupted. 

Unfortunately, the uproar awoke Mr. Jones, who sprang out of bed, making 
sure that there was a fox in the yard. He seized the gun which always 
stood in a corner of his bedroom, and let fly a charge of number 6 shot 
into the darkness. The pellets buried themselves in the wall of the barn 
and the meeting broke up hurriedly. Everyone fled to his own 
sleeping-place. The birds jumped on to their perches, the animals settled 
down in the straw, and the whole farm was asleep in a moment.
Stack Overflow

Search…
 
Log In Sign Up
By using our site, you acknowledge that you have read and understand our Cookie Policy, Privacy Policy, and our Terms of Service.

Join Stack Overflow to learn, share knowledge, and build your career.

Email Sign Up
OR SIGN IN WITH
 Google
 Facebook
Home
PUBLIC
Stack Overflow
Tags
Users
Jobs
Teams
Q&A for work
Learn More
What can lead to “IOError: [Errno 9] Bad file descriptor” during os.system()?
Ask Question
up vote
41
down vote
favorite
4
sing a scientific software including a Python script that is calling os.system() which is used to run another scientific program. While the subprocess is running, Python at some point prints the following:

close failed in file object destructor:
IOError: [Errno 9] Bad file descriptor
I believe that this message is printed at the same time as os.system() returns.

My questions now are:

Which conditions can lead to this type of IOError? What does it exactly mean? What does it mean for the subprocess that has been invoked by os.system()?

python subprocess posix file-descriptor ioerror
shareimprove this question
edited Apr 24 '16 at 0:10

Aminah Nuraini
6,19344259
asked Oct 7 '11 at 10:54

Jan-Philip Gehrcke
18.6k46093
2
Note: using the subprocess module is preferable over os.system(). – Petr Viktorin Oct 7 '11 at 11:07
:-) I know that and there is a lot of non-perfect stuff in this software. – Jan-Philip Gehrcke Oct 7 '11 at 11:15 
add a comment
2 Answers
active oldest votes
up vot
down vote
accepted
You get this error message if a Python file was closed from "the outside", i.e. not from the file object's close() method:

>>> f = open(".bashrc")
>>> os.close(f.fileno())
>>> del f
close failed in file object destructor:
IOError: [Errno 9] Bad file descriptor
The line del f deletes the last reference to the file object, causing its destructor file.__del__ to be called. The internal state of the file object indicates the file is still open since f.close() was never called, so the destructor tries to close the file. The OS subsequently throws an error because of the attempt to close a file that's not open.

Since the implementation of os.system() does not create any Python file objects, it does not seem likely that the system() call is the origin of the error. Maybe you could show a bit more code?

shareimprove this answer
answered Oct 7 '11 at 11:13

Sven Marnach
335k75737686
Thanks.. I already had this suspicion. Showing more code would not make sense at this point, because this Python script is quite big, not well-structured and not well-written. I don't have a very good overview so far. With the help of your information, I'll try to find the issue myself first. – Jan-Philip Gehrcke Oct 7 '11 at 11:18
One more question: in your example, you used del f instead of f.close(), which would have resulted in a traceback. Is del f equivalent with what happens during Python's garbage collecting? – Jan-Philip Gehrcke Oct 7 '11 at 11:21
1
@Jan-PhilipGehrcke: d simply deletes the name f, decreasing the reference count of the object that name points to. If there are no other references left, this triggers garbage collection, including a call to the __del__() method of the object. Since you were getting the error message in a os.system() call, I suspect it is due to implicit garbage collection, so I used del to demonstrate the effect. The single line os.close(open(".bashrc").fileno()) produces the same error. – Sven Marnach Oct 7 '11 at 11:26
2
@Jan-PlipGehrcke: If you are using Python 2.6 or 2.7, you could try a hack: import io; __builtins__.open = io.open replaces the open() builtin by the version from the io module (backported from 3.0). The new version of open() is slower, but ignores if the file is already closed. – Sven Marnach Oct 7 '11 at 11:29
1
@Jan-Philip: Yes, if the MPI passes around OS-level file descriptors and not Python file objects. If you're using a MPI, I'd call this a very probable cause. – Petr Viktorin Oct 7 '11 at56
show 4 more comments
up vote
12
down vote
You can get this error if you use wrong mode when opening the file. For example:

    with open(output, 'wb') as output_file:
        print output_file.read()
In that code, I want to read the file, but I use mode wb instead of r or r+

shareimprove this answer
answered Nov 30 '15 at 18:38

Aminah Nuraini
6,19344259
add a comment
Your Answer

 
Sign up or log in
 Sign up using Google
 Sign up using Facebook
 Sign up using Email and Password
 
Post as a guest
Name

Email

required, but never shown
 Post Your Answer
By clicking "Post Your Answer", you acknowledge that you have read our updated terms of service, privacy policy and cookie policy, and that your continued use of the website is subject to these policies.
Not the answer you're looking for? Browse other questions tagged python subprocess posix file-descriptor ioerror or ask your own question.
asked

7 years, 1 month ago

viewed

88,376 times

active

2 years, 6 months ago

Linked
0
How do i write html data into file in python, Error is “IOError: [Errno 9] Bad file descriptor”
0
bq fails with “close failed in file object destructor / IOError: [Errno 9] Bad file descriptor”
0
zoneinfo data corrupt, how do I compile new data?
1
Why am I getting this error OSError: [Errno 9] Bad file descriptor? Occurs when closing a file using f.close()
Related
18
Python Exception handling
175
Running Bash commands in Python
241
Redirect stdout to a file in Python?
275
What are file des, explained in simple terms?
5
What happens to file descriptors in Python 3 when .close() fails?
303
Python vs Cpython
-2
<type 'exceptions.IOError'> [Errno 9] Bad file descriptor
0
intermittent Bad File Descriptor error
2
Threading & SpiDev - IOError [Errno 9]: Bad file descriptor
0
errno 9 bad file descriptor, basic python server socket
Hot Network Questions
What does "auf" mean in "aufsperren"?
Can you have interaction terms for both "sides" of a dummy variable in a single regression?
Why do inequalities flip signs?
Contradiction between first derivative formal definition and derivative rules?
What is my family's name?
Can Beehive detect a Snowden-like actor?
Can you reduce yourself, crawl into the Tarrasque's airway, and try to collapse its lung by enlarging inside of it?
What is this abandoned airplane parked in Tegel airport?
Can you attack while you have two targets grappled?
What constitutes the Shema?
Can a cancerous cell from outside cause cancer in a healthy person?
My First Mosquito Bite
How to prevent my child from being indoctrinated with Christianity?
Why do the British use the word "flipping" for emphasis?
How to get the list of all application installed which has GUI?
How to say this is how i do etc
Do hash functions need to "look random"?
Is there an idiom about how humanely killing something is better than letting it live in pain?
Can a person be banned from flying across the U.S. if he has a criminal record?
How to defend when attacked by an avian species?
Cryomancer, combat style
Problem understanding covariance contravariance with generics in C#
What happened to the original crew of Destiny?
Is it bad practice to prefix my hash with the algorithm used?
 question feed
STACK OVERFLOW
Questions
Jobs
Developer Jobs Directory
Salary Calculator
Help
Mobile
Disable Responsiveness
PRODUCTS
Teams
Talent
Engagement
Enterprise
COMPANY
About
Press
Work Here
Legal
Privacy Policy
Contact Us
STACK EXCHANGE
NETWORK
Technology
Life / Arts
Culture / Recreation
Science
Other
Blog
Facebook
Twitter
LinkedIn
site design / logo © 2018 Stack Exchange Inc; user contributions licensed under cc by-sa 3.0 with attribution required. rev 2018.11.7.32103